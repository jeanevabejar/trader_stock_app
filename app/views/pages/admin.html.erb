<script>
 document.addEventListener('DOMContentLoaded', function() {
    const tabs = document.querySelectorAll('[data-tab]');
    const tables = document.querySelectorAll('.tables');

    tabs.forEach(tab => {
      tab.addEventListener('click', function(e) {
        e.preventDefault();
        const tabId = this.dataset.tab;

        tables.forEach(table => table.classList.add('hidden'));

        const targetTable = document.getElementById(tabId);
        if (targetTable) {
          targetTable.classList.remove('hidden');
        }
      });
    });
 });
</script>

<div class="bg-[#1e222d] text-slate-200">

<div class="p-3 mt-2">
  <h1 class="font-sans font-medium text-4xl">Dashboard</h1>
  <h1 class="font-sans font-thin text-xl">Admin</h1>
</div>









<script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js" defer></script>

<style>
@import url(https://cdnjs.cloudflare.com/ajax/libs/MaterialDesign-Webfont/5.3.45/css/materialdesignicons.min.css);
@import url(https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.css);
</style>

<div class="flex bg-gray-900 p-5">
<!--main container above -->

    <div class="bg-[#1e222d] text-gray-500 rounded-xl shadow-xl pt-10 px-5 w-1/2 lg:w-1/2 mr-3" x-data="{chartData:chartData()}" x-init="chartData.fetch()">
        <div class="flex flex-wrap items-end">
            <div class="flex-1">
                <h3 class="text-lg font-semibold leading-tight">Market Income</h3>
            </div>
            <div class="relative" @click.away="chartData.showDropdown=false">
                <button class="text-xs hover:text-gray-300 h-6 focus:outline-none" @click="chartData.showDropdown=!chartData.showDropdown">
                    <span x-text="chartData.options[chartData.selectedOption].label"></span><i class="ml-1 mdi mdi-chevron-down"></i>
                </button>
                <div class="bg-gray-700 shadow-lg rounded text-sm absolute top-auto right-0 min-w-full w-32 z-30 mt-1 -mr-3" x-show="chartData.showDropdown" style="display: none;" x-transition:enter="transition ease duration-300 transform" x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0" x-transition:leave="transition ease duration-300 transform" x-transition:leave-start="opacity-100 translate-y-0" x-transition:leave-end="opacity-0 translate-y-4">
                    <span class="absolute top-0 right-0 w-3 h-3 bg-gray-700 transform rotate-45 -mt-1 mr-3"></span>
                    <div class="bg-gray-700 rounded w-full relative z-10 py-1">
                        <ul class="list-reset text-xs">
                            <template x-for="(item,index) in chartData.options">
                                <li class="px-4 py-2 hover:bg-gray-600 hover:text-white transition-colors duration-100 cursor-pointer" :class="{'text-white':index==chartData.selectedOption}" @click="chartData.selectOption(index);chartData.showDropdown=false">
                                    <span x-text="item.label"></span>
                                </li>
                            </template>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="flex flex-wrap items-end mb-5">
            <h4 class="text-2xl lg:text-3xl text-white font-semibold leading-tight inline-block mr-2" x-text="'$'+(chartData.data?chartData.data[chartData.date].total.comma_formatter():0)">0</h4>
            <span class="inline-block" :class="chartData.data&&chartData.data[chartData.date].upDown<0?'text-red-500':'text-green-500'"><span x-text="chartData.data&&chartData.data[chartData.date].upDown<0?'▼':'▲'">0</span> <span x-text="chartData.data?chartData.data[chartData.date].upDown:0">0</span>%</span>
        </div>
        <div>
            <canvas id="chart" class="w-full"></canvas>
  </div>

  <div class="w-full flex flex-row justify-evenly mt-10 text-white">
      <div class="flex items-start">
      <span class=" mr-2">All users</span><span class="text-xl text-orange-400"><%= @users.count %></span>
      </div>
      <div class="flex items-start mr-10">
      <span class=" mr-2">Active</span><span  class="text-xl text-green-400"><%= @active_traders.count %></span>
      </div>
      <div class="flex items-start mr-10">
      <span class="mr-2">Unapproved</span><span  class="text-xl text-blue-400"><%= @to_be_approved.count %></span>
      </div>
      <div class="flex items-start mr-10">
      <span class=" mr-2">Uncomfirmed</span><span  class="text-xl text-red-400"><%= @to_be_confirmed.count %></span>
      </div>
  </div>

</div>
<%# ---------------------- end of market income widget -------------------%>

<%# ---------------------- users widget -------------------%>
<div class="ml-3 flex flex-col bg-[#1e222d] w-1/2 rounded-xl justify-center items-center py-10">

    <div class="w-full max-w-3xl">
        <div class="-mx-2 md:flex">
            <div class="w-full md:w-1/3 px-2">
                <div class="rounded-lg shadow-sm mb-4">
                    <div class="rounded-lg bg-gray-800 shadow-lg md:shadow-xl relative overflow-hidden">
                        <div class="px-3 pt-8 pb-10 text-center relative z-10">
                            <h4 class="text-sm uppercase text-gray-300 leading-tight">Trades</h4>
                            <h3 class="text-3xl text-gray-300 font-semibold leading-tight my-3">3,682</h3>
                            <p class="text-xs text-green-500 leading-tight">▲ 57.1%</p>
                        </div>
                        <div class="absolute bottom-0 inset-x-0">
                            <canvas id="chart1" height="70"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="w-full md:w-1/3 px-2">
                <div class="rounded-lg shadow-sm mb-4">
                    <div class="rounded-lg bg-gray-800 shadow-lg md:shadow-xl relative overflow-hidden">
                        <div class="px-3 pt-8 pb-10 text-center relative z-10">
                            <h4 class="text-sm uppercase text-gray-300 leading-tight">Visits</h4>
                            <h3 class="text-3xl text-gray-300 font-semibold leading-tight my-3">11,427</h3>
                            <p class="text-xs text-red-500 leading-tight">▼ 42.8%</p>
                        </div>
                        <div class="absolute bottom-0 inset-x-0">
                            <canvas id="chart2" height="70"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="w-full md:w-1/3 px-2">
                <div class="rounded-lg shadow-sm mb-4">
                    <div class="rounded-lg bg-gray-800 shadow-lg md:shadow-xl relative overflow-hidden">
                        <div class="px-3 pt-8 pb-10 text-center relative z-10">
                            <h4 class="text-sm uppercase text-gray-300 leading-tight">Investments</h4>
                            <h3 class="text-3xl text-gray-300 font-semibold leading-tight my-3">8,028</h3>
                            <p class="text-xs text-green-500 leading-tight">▲ 8.2%</p>
                        </div>
                        <div class="absolute bottom-0 inset-x-0">
                            <canvas id="chart3" height="70"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
  




  	<div class="flex flex-col items-center w-full max-w-screen-md p-6 pb-6 bg-transparent rounded-lg sm:p-8">
		<h2 class="text-xl font-bold">Monthly Revenue</h2>
		<span class="text-sm font-semibold text-gray-500">2024</span>
		<div class="flex items-end flex-grow w-full mt-2 space-x-2 sm:space-x-3">
			<div class="relative flex flex-col items-center flex-grow pb-5 group">
				<span class="absolute top-0 hidden -mt-6 text-xs font-bold group-hover:block">$37,500</span>
				<div class="relative flex justify-center w-full h-8 bg-indigo-200"></div>
				<div class="relative flex justify-center w-full h-6 bg-indigo-300"></div>
				<div class="relative flex justify-center w-full h-16 bg-indigo-400"></div>
				<span class="absolute bottom-0 text-xs font-bold">Jan</span>
			</div>
			<div class="relative flex flex-col items-center flex-grow pb-5 group">
				<span class="absolute top-0 hidden -mt-6 text-xs font-bold group-hover:block">$45,000</span>
				<div class="relative flex justify-center w-full h-10 bg-indigo-200"></div>
				<div class="relative flex justify-center w-full h-6 bg-indigo-300"></div>
				<div class="relative flex justify-center w-full h-20 bg-indigo-400"></div>
				<span class="absolute bottom-0 text-xs font-bold">Feb</span>
			</div>
			<div class="relative flex flex-col items-center flex-grow pb-5 group">
				<span class="absolute top-0 hidden -mt-6 text-xs font-bold group-hover:block">$47,500</span>
				<div class="relative flex justify-center w-full h-10 bg-indigo-200"></div>
				<div class="relative flex justify-center w-full h-8 bg-indigo-300"></div>
				<div class="relative flex justify-center w-full h-20 bg-indigo-400"></div>
				<span class="absolute bottom-0 text-xs font-bold">Mar</span>
			</div>
			<div class="relative flex flex-col items-center flex-grow pb-5 group">
				<span class="absolute top-0 hidden -mt-6 text-xs font-bold group-hover:block">$50,000</span>
				<div class="relative flex justify-center w-full h-10 bg-indigo-200"></div>
				<div class="relative flex justify-center w-full h-6 bg-indigo-300"></div>
				<div class="relative flex justify-center w-full h-24 bg-indigo-400"></div>
				<span class="absolute bottom-0 text-xs font-bold">Apr</span>
			</div>
			<div class="relative flex flex-col items-center flex-grow pb-5 group">
				<span class="absolute top-0 hidden -mt-6 text-xs font-bold group-hover:block">$47,500</span>
				<div class="relative flex justify-center w-full h-10 bg-indigo-200"></div>
				<div class="relative flex justify-center w-full h-8 bg-indigo-300"></div>
				<div class="relative flex justify-center w-full h-20 bg-indigo-400"></div>
				<span class="absolute bottom-0 text-xs font-bold">May</span>
			</div>
			<div class="relative flex flex-col items-center flex-grow pb-5 group">
				<span class="absolute top-0 hidden -mt-6 text-xs font-bold group-hover:block">$55,000</span>
				<div class="relative flex justify-center w-full h-12 bg-indigo-200"></div>
				<div class="relative flex justify-center w-full h-8 bg-indigo-300"></div>
				<div class="relative flex justify-center w-full h-24 bg-indigo-400"></div>
				<span class="absolute bottom-0 text-xs font-bold">Jun</span>
			</div>
			<div class="relative flex flex-col items-center flex-grow pb-5 group">
				<span class="absolute top-0 hidden -mt-6 text-xs font-bold group-hover:block">$60,000</span>
				<div class="relative flex justify-center w-full h-12 bg-indigo-200"></div>
				<div class="relative flex justify-center w-full h-16 bg-indigo-300"></div>
				<div class="relative flex justify-center w-full h-20 bg-indigo-400"></div>
				<span class="absolute bottom-0 text-xs font-bold">Jul</span>
			</div>
			<div class="relative flex flex-col items-center flex-grow pb-5 group">
				<span class="absolute top-0 hidden -mt-6 text-xs font-bold group-hover:block">$57,500</span>
				<div class="relative flex justify-center w-full h-12 bg-indigo-200"></div>
				<div class="relative flex justify-center w-full h-10 bg-indigo-300"></div>
				<div class="relative flex justify-center w-full h-24 bg-indigo-400"></div>
				<span class="absolute bottom-0 text-xs font-bold">Aug</span>
			</div>
			<div class="relative flex flex-col items-center flex-grow pb-5 group">
				<span class="absolute top-0 hidden -mt-6 text-xs font-bold group-hover:block">$67,500</span>
				<div class="relative flex justify-center w-full h-12 bg-indigo-200"></div>
				<div class="relative flex justify-center w-full h-10 bg-indigo-300"></div>
				<div class="relative flex justify-center w-full h-32 bg-indigo-400"></div>
				<span class="absolute bottom-0 text-xs font-bold">Sep</span>
			</div>
			<div class="relative flex flex-col items-center flex-grow pb-5 group">
				<span class="absolute top-0 hidden -mt-6 text-xs font-bold group-hover:block">$65,000</span>
				<div class="relative flex justify-center w-full h-12 bg-indigo-200"></div>
				<div class="relative flex justify-center w-full h-12 bg-indigo-300"></div>
				<div class="relative flex justify-center w-full bg-indigo-400 h-28"></div>
				<span class="absolute bottom-0 text-xs font-bold">Oct</span>
			</div>
			<div class="relative flex flex-col items-center flex-grow pb-5 group">
				<span class="absolute top-0 hidden -mt-6 text-xs font-bold group-hover:block">$70,000</span>
				<div class="relative flex justify-center w-full h-8 bg-indigo-200"></div>
				<div class="relative flex justify-center w-full h-8 bg-indigo-300"></div>
				<div class="relative flex justify-center w-full h-40 bg-indigo-400"></div>
				<span class="absolute bottom-0 text-xs font-bold">Nov</span>
			</div>
			<div class="relative flex flex-col items-center flex-grow pb-5 group">
				<span class="absolute top-0 hidden -mt-6 text-xs font-bold group-hover:block">$75,000</span>
				<div class="relative flex justify-center w-full h-12 bg-indigo-200"></div>
				<div class="relative flex justify-center w-full h-8 bg-indigo-300"></div>
				<div class="relative flex justify-center w-full h-40 bg-indigo-400"></div>
				<span class="absolute bottom-0 text-xs font-bold">Dec</span>
			</div>
		</div>
		<div class="flex w-full mt-3">
			<div class="flex items-center ml-auto">
				<span class="block w-4 h-4 bg-indigo-400"></span>
				<span class="ml-1 text-xs font-medium">Existing</span>
			</div>
			<div class="flex items-center ml-4">
				<span class="block w-4 h-4 bg-indigo-300"></span>
				<span class="ml-1 text-xs font-medium">Upgrades</span>
			</div>
			<div class="flex items-center ml-4">
				<span class="block w-4 h-4 bg-indigo-200"></span>
				<span class="ml-1 text-xs font-medium">New</span>
			</div>
		</div>
	</div>

</div>


<!-- Script -->
<script>
const chartOptions = {
    maintainAspectRatio: false,
    legend: {
        display: false,
    },
    tooltips: {
        enabled: false,
    },
    elements: {
        point: {
            radius: 0
        },
    },
    scales: {
        xAxes: [{
            gridLines: false,
            scaleLabel: false,
            ticks: {
                display: false
            }
        }],
        yAxes: [{
            gridLines: false,
            scaleLabel: false,
            ticks: {
                display: false,
                suggestedMin: 0,
                suggestedMax: 10
            }
        }]
    }
};
//
var ctx = document.getElementById('chart1').getContext('2d');
var chart = new Chart(ctx, {
    type: "line",
    data: {
        labels: [1, 2, 1, 3, 5, 4, 7],
        datasets: [
            {
                backgroundColor: "rgba(101, 116, 205, 0.1)",
                borderColor: "rgba(101, 116, 205, 0.8)",
                borderWidth: 2,
                data: [1, 2, 1, 3, 5, 4, 7],
            },
        ],
    },
    options: chartOptions
});
//
var ctx = document.getElementById('chart2').getContext('2d');
var chart = new Chart(ctx, {
    type: "line",
    data: {
        labels: [2, 3, 2, 9, 7, 7, 4],
        datasets: [
            {
                backgroundColor: "rgba(246, 109, 155, 0.1)",
                borderColor: "rgba(246, 109, 155, 0.8)",
                borderWidth: 2,
                data: [2, 3, 2, 9, 7, 7, 4],
            },
        ],
    },
    options: chartOptions
});
//
var ctx = document.getElementById('chart3').getContext('2d');
var chart = new Chart(ctx, {
    type: "line",
    data: {
        labels: [2, 5, 1, 3, 2, 6, 7],
        datasets: [
            {
                backgroundColor: "rgba(246, 153, 63, 0.1)",
                borderColor: "rgba(246, 153, 63, 0.8)",
                borderWidth: 2,
                data: [2, 5, 1, 3, 2, 6, 7],
            },
        ],
    },
    options: chartOptions
});
</script>

</div>

<%# --------------------------- sessions----------------------------------- %> 

    
</div>

<script>
Number.prototype.comma_formatter = function() {
    return this.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",");
}

let chartData = function(){
    return {
        date: 'today',
        options: [
            {
                label: 'Today',
                value: 'today',
            },
            {
                label: 'Last 7 Days',
                value: '7days',
            },
            {
                label: 'Last 30 Days',
                value: '30days',
            },
            {
                label: 'Last 6 Months',
                value: '6months',
            },
            {
                label: 'This Year',
                value: 'year',
            },
        ],
        showDropdown: false,
        selectedOption: 0,
        selectOption: function(index){
            this.selectedOption = index;
            this.date = this.options[index].value;
            this.renderChart();
        },
        data: null,
        fetch: function(){
            fetch('https://cdn.jsdelivr.net/gh/swindon/fake-api@master/tailwindAlpineJsChartJsEx1.json')
                .then(res => res.json())
                .then(res => {
                    this.data = res.dates;
                    this.renderChart();
                })
        },
        renderChart: function(){
            let c = false;

            Chart.helpers.each(Chart.instances, function(instance) {
                if (instance.chart.canvas.id == 'chart') {
                    c = instance;
                }
            });

            if(c) {
                c.destroy();
            }

            let ctx = document.getElementById('chart').getContext('2d');

            let chart = new Chart(ctx, {
                type: "line",
                data: {
                    labels: this.data[this.date].data.labels,
                    datasets: [
                        {
                            label: "Buy",
                            backgroundColor: "rgba(102, 126, 234, 0.25)",
                            borderColor: "rgba(102, 126, 234, 1)",
                            pointBackgroundColor: "rgba(102, 126, 234, 1)",
                            data: this.data[this.date].data.income,
                        },
                        {
                            label: "Sell",
                            backgroundColor: "rgba(237, 100, 166, 0.25)",
                            borderColor: "rgba(237, 100, 166, 1)",
                            pointBackgroundColor: "rgba(237, 100, 166, 1)",
                            data: this.data[this.date].data.expenses,
                        },
                    ],
                },
                layout: {
                    padding: {
                        right: 10
                    }
                },
                options: {
                    scales: {
                        yAxes: [{
                            gridLines: {
                                display: false
                            },
                            ticks: {
                                callback: function(value,index,array) {
                                    return value > 1000 ? ((value < 1000000) ? value/1000 + 'K' : value/1000000 + 'M') : value;
                                }
                            }
                        }]
                    }
                }
            });
        }
    }
}
</script>






<span class="absolute right-3 top-3">
<%= link_to destroy_admin_session_path, method: :delete, data: {  turbo_method: :delete } do %><i class="fa-solid fa-arrow-right-from-bracket text-transparent hover:text-white"></i><% end %>
</span>

<div class="bg-[#1e222d] users-section text-gray-300">
<ul class="sticky top-0 flex flex-wrap text-sm font-medium text-center text-gray-300 bg-gray-800 pt-3">
    <li class="me-2">
        <a href="#" aria-current="page" class="inline-block p-4 rounded-t-lg  hover:text-blue-600 hover:bg-gray-700  focus:text-blue-600 focus:bg-gray-800" data-tab="all-users">All Users</a>
    </li> 
    <li class="me-2">
        <a href="#" class="inline-block p-4 rounded-t-lg hover:text-blue-600 hover:bg-gray-700  focus:text-blue-600 focus:bg-gray-800" data-tab="pending-approval">Pending Approval</a>
    </li>
    <li class="me-2">
        <a href="#" class="inline-block p-4 rounded-t-lg hover:text-blue-600 hover:bg-gray-700  focus:text-blue-600 focus:bg-gray-800" data-tab="pending-confirmation">Pending Confirmation</a>
    </li>
    <li class="me-2">
        <a href="#" class="inline-block p-4 rounded-t-lg hover:text-blue-600 hover:bg-gray-700  focus:text-blue-600 focus:bg-gray-800" data-tab="transactions">Transactions</a>
    </li>
     <li class="me-2">
        <%= link_to "Create new Trader", new_user_path, data: { turbo_frame: "modal"}, class: "inline-block p-4 rounded-t-lg hover:text-blue-600 hover:bg-gray-700  focus:text-blue-600 focus:bg-gray-800"%>
    </li> 
</ul>


<div class="admin-table">
<div id="all-users" class="tables">
<table class="w-full text-sm text-left rtl:text-right">
  <thead>
    <tr>
      <th scope="col" class="px-6 py-5">User ID</th>
      <th scope="col" class="px-6 py-5">Email</th>
      <th scope="col" class="px-6 py-5">Edit Trader</th>
      <th scope="col" class="px-6 py-5">Inspect Trader</th>
      <th scope="col" class="px-6 py-5">Confirmed Trader</th>
      <th scope="col" class="px-6 py-5">Approved for trading</th>
    </tr>
  </thead>


  <tbody >
    <% @users.each do |user| %>
      <tr>
        <td class="px-6 py-4"><%= user.id %></td>
        <td class="px-6 py-4"><%= user.email %></td> 
        <td class="px-6 py-4"><%= link_to edit_user_path(user), method: :get, data: { turbo_frame: "modal"}, class:"pl-6" do %><i class="fa-solid fa-pencil"></i><% end %></td>
        <td class="px-6 py-4"><%= link_to show_user_path(user), method: :get, data: { turbo_frame: "modal"}, class:"pl-10" do %><i class="fa-regular fa-eye"></i><% end %></td>
        <td class="px-6 py-4"><% if user.confirmed? %><span class="text-green-600 pl-10"><i class="fa-solid fa-check"></i></span><% else %><span class="text-red-600 pl-10"><i class="fa-solid fa-x"></i></span><% end %></td>
        <td class="px-6 py-4"><% if user.is_approved? %><span class="text-green-600 pl-12"><i class="fa-solid fa-check"></i></span><% else %><span class="text-red-600 pl-12"><i class="fa-solid fa-x"></i></span><% end %></td>
      </tr>
    <% end %>
  </tbody>
  </div>
</table>
</div>

<div id="pending-approval" class="tables hidden">
  <table class="w-full text-sm text-left rtl:text-right">
  <thead>
    <tr>
      <th scope="col" class="px-6 py-5">User ID</th>
      <th scope="col" class="px-6 py-5">Email</th>
      <th scope="col" class="px-6 py-5">Edit Trader</th>
      <th scope="col" class="px-6 py-5">Inspect Trader</th>
      <th scope="col" class="px-6 py-5">Approved for trading</th>
    </tr>
  </thead>
  
  <tbody>
    <% @to_be_approved.each do |user| %>
      <tr>
        <td class="px-6 py-4"><%= user.id %></td>
        <td class="px-6 py-4"><%= user.email %></td> 
        <td class="px-6 py-4"><%= link_to edit_user_path(user), method: :get, data: { turbo_frame: "modal"}, class:"pl-6" do %><i class="fa-solid fa-pencil"></i><% end %></td>
        <td class="px-6 py-4"><%= link_to show_user_path(user), method: :get, data: { turbo_frame: "modal"}, class:"pl-10" do %><i class="fa-regular fa-eye"></i><% end %></td>
        <td class="px-6 py-4"><% if user.is_approved? %><span class="text-green-600 pl-10"><i class="fa-solid fa-check"></i></span><% else %><span class="text-red-600 pl-10"><i class="fa-solid fa-x"></i></span><% end %></td>
      </tr>
    <% end %>
  </tbody>
  </table>
</div>

<div id="pending-confirmation" class="tables hidden">
  <table class="w-full text-sm text-left rtl:text-right">
  <thead>
    <tr>
      <th scope="col" class="px-6 py-5">User ID</th>
      <th scope="col" class="px-6 py-5">Email</th>
      <th scope="col" class="px-6 py-5">Edit Trader</th>
      <th scope="col" class="px-6 py-5">Inspect Trader</th>
      <th scope="col" class="px-6 py-5">Confirmed Trader</th>
    </tr>
  </thead>
  
  <tbody>
    <% @to_be_confirmed.each do |user| %>
      <tr>
        <td class="px-6 py-4"><%= user.id %></td>
        <td class="px-6 py-4"><%= user.email %></td> 
        <td class="px-6 py-4"><%= link_to edit_user_path(user), method: :get, data: { turbo_frame: "modal"}, class:"pl-6" do %><i class="fa-solid fa-pencil"></i><% end %></td>
        <td class="px-6 py-4"><%= link_to show_user_path(user), method: :get, data: { turbo_frame: "modal"}, class:"pl-10" do %><i class="fa-regular fa-eye"></i><% end %></td>
        <td class="px-6 py-4"><% if user.confirmed? %><span class="text-green-600 pl-10"><i class="fa-solid fa-check"></i></span><% else %><span class="text-red-600 pl-10"><i class="fa-solid fa-x"></i></span><% end %></td>
      </tr>
    <% end %>
  </tbody>
  </table>
</div>

<div id="transactions" class="tables hidden">
  <table class="w-full border border-gray-700">
  <thead class="sticky top-0">
    <tr class="flex flex-row justify-evenly primary-color">
      <th class="w-1/5 py-2">Stock Name</th>
      <th class="w-1/5 py-2">Price</th>
      <th class="w-1/5 py-2">Share/Quantity</th>
      <th class="w-1/5 py-2">Transaction type</th>
      <th class="w-1/5 py-2">Transaction time</th>
    </tr>
  </thead>
  <tbody>
    <% @transactions.each do |t| %>
      <tr class="flex justify-evenly border-t border-gray-700 text-center text-[0.9rem]">
        <td class="w-1/5 py-2"><%= t.stock_name %></td>
        <td class="w-1/5 py-2">USD <%= t.price %></td>
        <td class="w-1/5 py-2"><%= t.share %></td>
        <% if t.is_buy == true %>
          <td class="w-1/5 py-2 text-green-700 font-medium">Buy</td>
        <% else %>
          <td class="w-1/5 py-2 text-red-700 font-medium">Sell</td>
        <% end %>
        <td class="w-1/5 py-2"><%= t.created_at.strftime("%a, %b %d, %Y %I:%M %p") %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>
</div>
